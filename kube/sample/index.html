<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kube-Vault Sample</title>
</head>
<body>
<h1>Kube/Vault Auth Example</h1>
<p>
    Kubernetes service account: <span id="kube-sa"></span>
</p>
<p>
    Vault token: <span id="vault-token"></span>
</p>
<p>
    <button id="vault-token-button">Get Vault token</button>
</p>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" type="application/javascript"></script>
<script type="application/javascript">
    var vaultToken = undefined;

    $.getJSON("/api/serviceAccount", function (data) {
        $("#kube-sa").text(data["name"] + " (namespace: " + data["namespace"] + ")");
    });

    $("#vault-token-button").click(e => {
        $.getJSON("/api/vaultToken", function(data) {
            updateVaultToken(data["token"]);
        });
    });

    function updateVaultToken(t) {
        vaultToken = t;
        $("#vault-token").text(vaultToken);
    }
</script>
</body>
</html>
